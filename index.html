<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>videojs-delightful-player Demo</title>
    <link href="node_modules/video.js/dist/video-js.css" rel="stylesheet" />
    <link href="dist/videojs-delightful-player.css" rel="stylesheet" />
    <link rel="stylesheet" href="./css/styles.css" />
  </head>
  <body>
    <div class="container">
      <canvas class="canvas"></canvas>
      <div class="color-div div1"></div>
      <div class="color-div div2"></div>
      <div class="div-url">
        <select
          onchange="getSelectValue()"
          name="video-examples"
          id="video-examples"
          class="selector"
        >
          <option value="https://test-streams.mux.dev/x36xhzz/x36xhzz.m3u8">
            Big buck bunny
          </option>
          <option
            value="http://playertest.longtailvideo.com/adaptive/wowzaid3/playlist.m3u8"
          >
            Animals
          </option>
          <option value="http://localhost:9999/video/cars2.mp4">Cars 2</option>
          <option
            value="http://sample.vodobox.net/skate_phantom_flex_4k/skate_phantom_flex_4k.m3u8"
          >
            Skate
          </option>
        </select>
        <div class="div-input-btn">
          <input id="input-url" type="text" placeholder="Enter a video url" />
          <button id="submit-btn" onclick="getInputValue()">Submit</button>
        </div>
      </div>
      <div data-vjs-player>
        <video
          id="videojs-delightful-player-player"
          class="video-js vjs-default-skin vjs-big-play-centered"
          controls
          muted
        >
          <!-- <track label="color" default src="./subtitles/subtitlesCars2.vtt" /> -->
          <source
            id="my-source"
            src="https://test-streams.mux.dev/x36xhzz/x36xhzz.m3u8"
            type="application/x-mpegURL"
          />
          <p class="vjs-no-js">
            To view this video please enable JavaScript, and consider upgrading
            to a web browser that
            <a href="https://videojs.com/html5-video-support/" target="_blank"
              >supports HTML5 video</a
            >
          </p>
        </video>
      </div>
      <div class="color-div div3"></div>
      <div class="color-div div4"></div>
    </div>

    <script src="node_modules/video.js/dist/video.js"></script>
    <script src="dist/videojs-delightful-player.js"></script>
    <script>
      (function (window, videojs) {
        var examplePlayer = (window.examplePlayer = videojs(
          "videojs-delightful-player-player"
        ));
        var delightfulPlayer = (window.delightfulPlayer =
          examplePlayer.delightfulPlayer());
      })(window, window.videojs);
    </script>

    <!-- personal functions: -->
    <script>
      function getInputValue() {
        const file = document.getElementById("input-url");
        const video = videojs("videojs-delightful-player-player");
        const videoExtension = file.value.split(".").pop();
        // HLS:
        // video for test: https://devstreaming-cdn.apple.com/videos/streaming/examples/img_bipbop_adv_example_fmp4/master.m3u8
        if (videoExtension === "m3u8") {
          video.src({
            src: file.value,
            type: "application/x-mpegURL",
          });
        } // DASH:
        // video for test: https://bitmovin-a.akamaihd.net/content/MI201109210084_1/mpds/f08e80da-bf1d-4e3d-8899-f0f6155f6efa.mpd
        else if (videoExtension === "mpd") {
          video.src({
            src: file.value,
            type: "application/dash+xml",
          });
        }
      }
    </script>
    <script>
      function getSelectValue() {
        const file = document.getElementById("video-examples");
        const value = file.options[file.selectedIndex].value;
        const video = videojs("videojs-delightful-player-player");
        video.src(value);
      }
    </script>
    <script>
      window.onload = getSelectValue();
    </script>
  </body>
</html>
