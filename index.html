<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>videojs-delightful-player Demo</title>
    <link href="node_modules/video.js/dist/video-js.css" rel="stylesheet" />
    <link href="dist/videojs-delightful-player.css" rel="stylesheet" />
    <link rel="stylesheet" href="./css/styles.css" />
  </head>
  <body>
    <div class="container">
      <canvas class="canvas"></canvas>
      <div class="color-div div1"></div>
      <div class="color-div div2"></div>
      <div class="div-url">
        <select
          onchange="getSelectValue()"
          name="video-examples"
          id="video-examples"
          class="selector"
        >
          <option
            selected
            value="http://sample.vodobox.net/skate_phantom_flex_4k/skate_phantom_flex_4k.m3u8"
          >
            Example 1
          </option>
          <option
            value="http://playertest.longtailvideo.com/adaptive/wowzaid3/playlist.m3u8"
          >
            Example 2
          </option>
          <option
            value="https://bitdash-a.akamaihd.net/content/sintel/hls/playlist.m3u8"
          >
            Example 3
          </option>
          <option
            value="http://qthttp.apple.com.edgesuite.net/1010qwoeiuryfg/sl.m3u8"
          >
            Example 4
          </option>
        </select>
        <div class="div-input-btn">
          <input id="input-url" type="text" placeholder="Enter a video url" />
          <button id="submit-btn" onclick="getInputValue()">Submit</button>
          <select
            name="selectFormat"
            id="selectFormat"
            class="selector"
            onchange="getModo(document)"
          >
            <option value="mono">Mono</option>
            <option value="stereo">Stereo</option>
            <option value="surround">Surround</option>
          </select>
          <div id="myData"></div>
        </div>
      </div>
      <video
        id="videojs-delightful-player-player"
        class="video-js vjs-default-skin vjs-big-play-centered"
        controls
        autoplay
        muted
      ></video>
      <div class="color-div div3"></div>
      <div class="color-div div4"></div>
    </div>

    <script src="node_modules/video.js/dist/video.js"></script>
    <script src="dist/videojs-delightful-player.js"></script>
    <script>
      (function (window, videojs) {
        var examplePlayer = (window.examplePlayer = videojs(
          "videojs-delightful-player-player"
        ));
        var delightfulPlayer = (window.delightfulPlayer =
          examplePlayer.delightfulPlayer());
      })(window, window.videojs);
    </script>

    <!-- personal functions: -->
    <script>
      function getInputValue() {
        const file = document.getElementById("input-url");
        const video = videojs("videojs-delightful-player-player");
        const videoExtension = file.value.split(".").pop();
        // TODO: cuando le pasamos un mp4 deja de andar el canvas
        // MP4:
        // video for test: http://commondatastorage.googleapis.com/gtv-videos-bucket/sample/WhatCarCanYouGetForAGrand.mp4
        if (videoExtension === "mp4") {
          video.src({
            src: file.value,
            type: "video/mp4",
          });
        } // HLS:
        // video for test: https://devstreaming-cdn.apple.com/videos/streaming/examples/img_bipbop_adv_example_fmp4/master.m3u8
        else if (videoExtension === "m3u8") {
          video.src({
            src: file.value,
            type: "application/x-mpegURL",
          });
        } // DASH:
        // video for test: https://bitmovin-a.akamaihd.net/content/MI201109210084_1/mpds/f08e80da-bf1d-4e3d-8899-f0f6155f6efa.mpd
        else if (videoExtension === "mpd") {
          video.src({
            src: file.value,
            type: "application/dash+xml",
          });
        }
      }
    </script>
    <script>
      function getSelectValue() {
        const file = document.getElementById("video-examples");
        const value = file.options[file.selectedIndex].value;
        const video = videojs("videojs-delightful-player-player");
        video.src(value);
      }
    </script>
    <script>
      window.onload = getSelectValue();
    </script>
    <script src="./src/selectFormat.js"></script>
    <script src="./src/getModo.js"></script>
  </body>
</html>
