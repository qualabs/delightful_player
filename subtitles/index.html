<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>videojs-delightful-player Demo</title>
    <link href="https://vjs.zencdn.net/7.20.3/video-js.css" rel="stylesheet" />
    <!-- my css -->
    <link rel="stylesheet" href="./css/styles.css" />
  </head>
  <body>
    <div class="container">
      <div class="color-div div1"></div>
      <div class="color-div div2"></div>
      <div class="color-div div3"></div>
      <div class="color-div div4"></div>
      <div class="div-url">
        <select
          onchange="getSelectValue()"
          name="video-examples"
          id="video-examples"
          class="selector"
        >
          <option value="https://test-streams.mux.dev/x36xhzz/x36xhzz.m3u8">
            Big buck bunny
          </option>
          <option
            value="http://playertest.longtailvideo.com/adaptive/wowzaid3/playlist.m3u8"
          >
            Animals
          </option>
          <option
            value="https://bitdash-a.akamaihd.net/content/sintel/hls/playlist.m3u8"
          >
            Sintel
          </option>
          <option
            value="http://sample.vodobox.net/skate_phantom_flex_4k/skate_phantom_flex_4k.m3u8"
          >
            Skate
          </option>
        </select>
        <div class="div-input-btn">
          <input id="input-url" type="text" placeholder="Enter a video url" />
          <button id="submit-btn" onclick="getInputValue()">Submit</button>
        </div>
      </div>
      <video
        id="videojs-delightful-player-player"
        class="video-js vjs-big-play-centered"
        controls
        muted
      >
        <source
          id="my-source"
          src="http://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4"
          type="video/mp4"
        />
        <track label="color" default src="subtitles.vtt" />
        <p class="vjs-no-js">
          To view this video please enable JavaScript, and consider upgrading to
          a web browser that
          <a href="https://videojs.com/html5-video-support/" target="_blank"
            >supports HTML5 video</a
          >
        </p>
      </video>
    </div>

    <script src="https://vjs.zencdn.net/7.20.3/video.min.js"></script>
    <!-- personal functions: -->
    <script>
      function getInputValue() {
        const value = document.getElementById("input-url").value;
        const video = document.getElementById(
          "videojs-delightful-player-player"
        );
        const source = document.getElementById("my-source");
        source.setAttribute("src", value);

        video.load();
        video.play();
      }
    </script>
    <script>
      function getSelectValue() {
        const file = document.getElementById("video-examples");
        const value = file.options[file.selectedIndex].value;
        const video = document.getElementById(
          "videojs-delightful-player-player"
        );
        const source = document.getElementById("my-source");
        source.setAttribute("src", value);
        source.setAttribute("type", "application/x-mpegURL");

        video.load();
        video.play();
      }
    </script>
    <script>
      // Get all text tracks for the current player.
      let video = document.getElementById("videojs-delightful-player-player");
      let tracks = video.textTracks;
      let metadataTrack;

      for (let i = 0; i < tracks.length; i++) {
        let track = tracks[i];
        track.mode = "hidden";

        track.oncuechange = (e) => {
          if (e.target.activeCues.length > 0) {
            // Parse the cue as JSON ðŸ¤ž
            let color = JSON.parse(e.target.activeCues[0].text);
            console.log(color);
          }
        };
      }
    </script>
  </body>
</html>
